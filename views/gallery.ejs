<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- views/gallery.ejs - Comics Gallery -->
<div class="card">
    <h2 style="text-align: center; margin-bottom: 30px; color: #333;">
        <i class="fas fa-images"></i> Comic Gallery
    </h2>

    <% if (comics && comics.length > 0) { %>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
        <% comics.forEach(comic => { %>
        <div style="border: 2px solid #ddd; border-radius: 15px; overflow: hidden; background: white; transition: transform 0.3s ease;">
            <% if (comic.images && comic.images.panels && comic.images.panels[0] && comic.images.panels[0].imagePath) { %>
            <img 
                src="<%= comic.images.panels[0].imagePath %>" 
                alt="<%= comic.story.title %>"
                style="width: 100%; height: 200px; object-fit: cover;"
            >
            <% } else { %>
            <div style="height: 200px; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem;">
                <i class="fas fa-image"></i>
            </div>
            <% } %>
            
            <div style="padding: 20px;">
                <h3 style="margin-bottom: 10px; color: #333;"><%= comic.story.title %></h3>
                <% if (comic.story.summary) { %>
                    <p style="color: #666; margin-bottom: 10px;"><%= comic.story.summary %></p>
                <% } %>
                <p style="font-size: 0.9em; color: #888; margin-bottom: 18px;">
                    <strong>Genre:</strong> <%= comic.story.genre || comic.genre || 'N/A' %><br>
                    <strong>Panels:</strong> <%= comic.story.scenes ? comic.story.scenes.length : (comic.images && comic.images.panels ? comic.images.panels.length : '-') %><br>
                    <strong>Created:</strong>
                    <%= comic.createdAt ? (new Date(comic.createdAt)).toLocaleString() : '-' %>
                </p>
                <a href="/comic/<%= comic.id %>" class="btn btn-secondary" style="width: 100%; text-align: center;">
                    <i class="fas fa-eye"></i> View Comic
                </a>
            </div>
        </div>
        <% }); %>
    </div>
    <% } else { %>
    <div style="text-align: center; color: #666; font-size: 1.2em; padding: 40px 0;">
        <i class="fas fa-info-circle"></i> No comics have been generated yet.<br>
        <a href="/" class="btn" style="margin-top: 20px;">
            <i class="fas fa-plus"></i> Create the first one!
        </a>
    </div>
    <% } %>
</div>
</body>
</html>